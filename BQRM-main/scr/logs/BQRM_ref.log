2025-08-25 15:56:27,933 - INFO - BQRM_ref:35 - -------------------------------------------------------------------
2025-08-25 15:56:27,934 - INFO - BQRM_ref:36 - Script BQRM_ref.py started.
2025-08-25 15:56:27,934 - INFO - BQRM_ref:37 - Shared log file for this run: /home/aoumeur/BQRM_V01/BQRM-main/scr/logs/BQRM_ref.log
2025-08-25 15:56:27,934 - INFO - BQRM_ref:38 - -------------------------------------------------------------------
2025-08-25 15:56:27,934 - INFO - date_time_utils:56 - Processed dates - Today: 2025-08-25, Yesterday: 2025-08-24
2025-08-25 15:56:27,934 - INFO - BQRM_ref:54 - Environment variables set:
2025-08-25 15:56:27,934 - INFO - BQRM_ref:55 -   Current Date: 2025-08-25
2025-08-25 15:56:27,934 - INFO - BQRM_ref:56 -   Previous Date: 2025-08-24
2025-08-25 15:56:27,934 - INFO - BQRM_ref:57 -   Current Working Directory (local_directory): /home/aoumeur/BQRM_V01/BQRM-main/scr
2025-08-25 15:56:27,934 - INFO - BQRM_ref:62 - Configuration variables loaded:
2025-08-25 15:56:27,934 - INFO - BQRM_ref:63 -   BUFR_INPUT_ROOT (absolute): /home/aoumeur/BQRM_V01/bufr_data/observations
2025-08-25 15:56:27,934 - INFO - BQRM_ref:64 -   local_directory: /home/aoumeur/BQRM_V01/BQRM-main/scr
2025-08-25 15:56:27,934 - INFO - BQRM_ref:65 -   bqrm_output_root: /home/aoumeur/BQRM_V01/BQRM-main
2025-08-25 15:56:27,934 - INFO - BQRM_ref:73 - FTP Server details: Server=ftp1.meteo.dz, Remote Directory=/share/ARPEGE+01+SP1
2025-08-25 15:56:27,935 - INFO - BQRM_ref:87 - Environment variables prepared for child scripts.
2025-08-25 15:56:27,935 - INFO - BQRM_ref:90 - Initiating FTP connection to ftp1.meteo.dz to download Arpege files...
2025-08-25 15:56:27,935 - INFO - BQRM_ref:111 - Listing remote files with pattern: 'YMID41_LFPW_25*' in remote directory: '/share/ARPEGE+01+SP1'
2025-08-25 15:56:27,935 - INFO - fetchdata:68 - Listing files in remote directory: /share/ARPEGE+01+SP1 on ftp1.meteo.dz (pattern: YMID41_LFPW_25*)...
2025-08-25 15:56:27,935 - INFO - fetchdata:17 - Attempting to connect to FTP server ftp1.meteo.dz:21...
2025-08-25 15:56:28,198 - INFO - fetchdata:20 - Successfully connected and logged in to ftp1.meteo.dz.
2025-08-25 15:56:28,208 - INFO - fetchdata:81 - Found 3 files matching pattern 'YMID41_LFPW_25*'.
2025-08-25 15:56:28,209 - INFO - BQRM_ref:137 - Initiating download of 3 Arpege files using FTP.
2025-08-25 15:56:28,209 - INFO - fetchdata:171 - Starting FTP file fetching process for 3 files.
2025-08-25 15:56:28,209 - INFO - fetchdata:17 - Attempting to connect to FTP server ftp1.meteo.dz:21...
2025-08-25 15:56:28,417 - INFO - fetchdata:20 - Successfully connected and logged in to ftp1.meteo.dz.
2025-08-25 15:56:28,418 - INFO - fetchdata:227 - Local file YMID41_LFPW_250000.534522ch68abcee6hp1581p.1316394.GB is missing. Downloading.
2025-08-25 15:56:28,418 - INFO - fetchdata:230 - Downloading /share/ARPEGE+01+SP1/YMID41_LFPW_250000.534522ch68abcee6hp1581p.1316394.GB to /home/aoumeur/BQRM_V01/BQRM-main/scr/YMID41_LFPW_250000.534522ch68abcee6hp1581p.1316394.GB
2025-08-25 15:56:28,434 - INFO - fetchdata:239 - Successfully downloaded YMID41_LFPW_250000.534522ch68abcee6hp1581p.1316394.GB
2025-08-25 15:56:28,434 - INFO - fetchdata:227 - Local file YMID41_LFPW_250600.536c71ch68ac2f21hp1581p.1327392.GB is missing. Downloading.
2025-08-25 15:56:28,434 - INFO - fetchdata:230 - Downloading /share/ARPEGE+01+SP1/YMID41_LFPW_250600.536c71ch68ac2f21hp1581p.1327392.GB to /home/aoumeur/BQRM_V01/BQRM-main/scr/YMID41_LFPW_250600.536c71ch68ac2f21hp1581p.1327392.GB
2025-08-25 15:56:28,449 - INFO - fetchdata:239 - Successfully downloaded YMID41_LFPW_250600.536c71ch68ac2f21hp1581p.1327392.GB
2025-08-25 15:56:28,450 - INFO - fetchdata:227 - Local file YMID41_LFPW_251200.53897c4h68ac7297hp1581p.1328816.GB is missing. Downloading.
2025-08-25 15:56:28,450 - INFO - fetchdata:230 - Downloading /share/ARPEGE+01+SP1/YMID41_LFPW_251200.53897c4h68ac7297hp1581p.1328816.GB to /home/aoumeur/BQRM_V01/BQRM-main/scr/YMID41_LFPW_251200.53897c4h68ac7297hp1581p.1328816.GB
2025-08-25 15:56:28,465 - INFO - fetchdata:239 - Successfully downloaded YMID41_LFPW_251200.53897c4h68ac7297hp1581p.1328816.GB
2025-08-25 15:56:28,466 - INFO - fetchdata:257 - FTP client closed.
2025-08-25 15:56:28,466 - INFO - fetchdata:261 - FTP file fetching process completed.
2025-08-25 15:56:28,466 - INFO - BQRM_ref:147 - FTP download of Arpege files successful.
2025-08-25 15:56:28,466 - INFO - file_operations:98 - Moved 'YMID41_LFPW_250000.534522ch68abcee6hp1581p.1316394.GB' to '/home/aoumeur/BQRM_V01/BQRM-main/arpege_geopotentiel_temperature'.
2025-08-25 15:56:28,467 - INFO - file_operations:98 - Moved 'YMID41_LFPW_250600.536c71ch68ac2f21hp1581p.1327392.GB' to '/home/aoumeur/BQRM_V01/BQRM-main/arpege_mslp'.
2025-08-25 15:56:28,467 - INFO - BQRM_ref:176 - Placeholder: Processing SMAL files to generate local BUFR files (this section was commented out in original code).
2025-08-25 15:56:28,467 - INFO - BQRM_ref:185 - Attempting to copy BUFR files from: /home/aoumeur/BQRM_V01/bufr_data/observations/2025/08/24/Synop_202508241800.bufr and /home/aoumeur/BQRM_V01/bufr_data/observations/2025/08/25/Synop_202508250600.bufr
2025-08-25 15:56:28,467 - INFO - BQRM_ref:191 - Successfully copied Synop_202508241800.bufr to /home/aoumeur/BQRM_V01/BQRM-main/synop_alg_202508241800.bufr.
2025-08-25 15:56:28,468 - INFO - BQRM_ref:198 - Successfully copied Synop_202508250600.bufr to /home/aoumeur/BQRM_V01/BQRM-main/synop_alg_202508250600.bufr.
2025-08-25 15:56:28,468 - INFO - BQRM_ref:212 - Executing Python processing scripts.
2025-08-25 15:56:28,468 - INFO - BQRM_ref:226 - Running Arpege_geopotentiel_temperature_plot.py for file: YMID41_LFPW_250000.534522ch68abcee6hp1581p.1316394.GB...
2025-08-25 15:56:28,468 - INFO - system_utils:36 - Executing command: python3 /home/aoumeur/BQRM_V01/BQRM-main/scr/Arpege_geopotentiel_temperature_plot.py /home/aoumeur/BQRM_V01/BQRM-main/arpege_geopotentiel_temperature/YMID41_LFPW_250000.534522ch68abcee6hp1581p.1316394.GB --shared-log-file /home/aoumeur/BQRM_V01/BQRM-main/scr/logs/BQRM_ref.log in directory: '/home/aoumeur/BQRM_V01/BQRM-main/scr'
2025-08-25 15:56:29,055 - INFO - Arpege_geopotentiel_temperature_plot:32 - -------------------------------------------------------------------
2025-08-25 15:56:29,055 - INFO - Arpege_geopotentiel_temperature_plot:33 - Script Arpege_geopotentiel_temperature_plot.py started.
2025-08-25 15:56:29,055 - INFO - Arpege_geopotentiel_temperature_plot:34 - Logging to shared file: /home/aoumeur/BQRM_V01/BQRM-main/scr/logs/BQRM_ref.log
2025-08-25 15:56:29,055 - INFO - Arpege_geopotentiel_temperature_plot:35 - -------------------------------------------------------------------
2025-08-25 15:56:29,055 - INFO - Arpege_geopotentiel_temperature_plot:56 - Environment variables loaded: PWD=/home/aoumeur/BQRM_V01/BQRM-main/scr, AA=2025, MM=08, DD=25
2025-08-25 15:56:29,055 - INFO - Arpege_geopotentiel_temperature_plot:216 - Input filename received from command line: /home/aoumeur/BQRM_V01/BQRM-main/arpege_geopotentiel_temperature/YMID41_LFPW_250000.534522ch68abcee6hp1581p.1316394.GB
2025-08-25 15:56:29,055 - INFO - Arpege_geopotentiel_temperature_plot:75 - Starting plot generation for input file: /home/aoumeur/BQRM_V01/BQRM-main/arpege_geopotentiel_temperature/YMID41_LFPW_250000.534522ch68abcee6hp1581p.1316394.GB
2025-08-25 15:56:29,084 - INFO - Arpege_geopotentiel_temperature_plot:80 - Successfully opened GRIB file: /home/aoumeur/BQRM_V01/BQRM-main/arpege_geopotentiel_temperature/YMID41_LFPW_250000.534522ch68abcee6hp1581p.1316394.GB
2025-08-25 15:56:29,138 - INFO - Arpege_geopotentiel_temperature_plot:92 - Successfully selected Geopotential data at 500 hPa.
2025-08-25 15:56:29,189 - INFO - Arpege_geopotentiel_temperature_plot:99 - Successfully selected Temperature data at 500 hPa.
2025-08-25 15:56:29,196 - INFO - Arpege_geopotentiel_temperature_plot:109 - Extracted geopotential data and lat/lon coordinates.
2025-08-25 15:56:29,197 - INFO - Arpege_geopotentiel_temperature_plot:113 - Extracted temperature data and converted to Celsius.
2025-08-25 15:56:29,197 - INFO - Arpege_geopotentiel_temperature_plot:117 - Closed GRIB file.
2025-08-25 15:56:29,197 - INFO - Arpege_geopotentiel_temperature_plot:120 - Initializing plot figure.
2025-08-25 15:56:29,205 - INFO - Arpege_geopotentiel_temperature_plot:124 - Setting up Basemap projection.
2025-08-25 15:56:29,843 - INFO - Arpege_geopotentiel_temperature_plot:130 - Basemap initialized successfully.
2025-08-25 15:56:29,939 - INFO - Arpege_geopotentiel_temperature_plot:138 - Coastlines and countries drawn on the map.
2025-08-25 15:56:29,942 - INFO - Arpege_geopotentiel_temperature_plot:142 - Converted lat/lon to map coordinates.
2025-08-25 15:56:29,943 - INFO - Arpege_geopotentiel_temperature_plot:145 - Plotting geopotential contours.
2025-08-25 15:56:30,001 - INFO - Arpege_geopotentiel_temperature_plot:150 - Geopotential contours plotted and labeled.
2025-08-25 15:56:30,001 - INFO - Arpege_geopotentiel_temperature_plot:155 - Defining temperature contour levels around -16°C.
2025-08-25 15:56:30,002 - INFO - Arpege_geopotentiel_temperature_plot:169 - Temperature contour levels defined.
2025-08-25 15:56:30,002 - INFO - Arpege_geopotentiel_temperature_plot:173 - Plotting temperature contours below -16°C (blue).
2025-08-25 15:56:30,017 - INFO - Arpege_geopotentiel_temperature_plot:181 - Plotting temperature contours above or equal to -16°C (red).
2025-08-25 15:56:30,043 - INFO - Arpege_geopotentiel_temperature_plot:187 - Temperature contours plotted and labeled.
2025-08-25 15:56:30,043 - INFO - Arpege_geopotentiel_temperature_plot:191 - Plot title set.
2025-08-25 15:56:30,044 - INFO - Arpege_geopotentiel_temperature_plot:198 - Attempting to save plot to: /home/aoumeur/BQRM_V01/BQRM-main/scr/../geopotential_and_temperature_202508250000.png
2025-08-25 15:56:30,361 - INFO - Arpege_geopotentiel_temperature_plot:203 - Plot saved successfully at /home/aoumeur/BQRM_V01/BQRM-main/scr/../geopotential_and_temperature_202508250000.png
2025-08-25 15:56:30,362 - INFO - Arpege_geopotentiel_temperature_plot:209 - Plot figure closed to release resources.
2025-08-25 15:56:30,362 - INFO - Arpege_geopotentiel_temperature_plot:211 - Plot generation completed for file.
2025-08-25 15:56:30,363 - INFO - Arpege_geopotentiel_temperature_plot:220 - Script finished successfully.
2025-08-25 15:56:30,447 - INFO - system_utils:47 - Command 'python3' completed successfully.
2025-08-25 15:56:30,448 - INFO - BQRM_ref:234 - Arpege_geopotentiel_temperature_plot.py executed successfully for YMID41_LFPW_250000.534522ch68abcee6hp1581p.1316394.GB.
2025-08-25 15:56:30,448 - INFO - BQRM_ref:245 - Running Arpege_mslp_plot.py for file: YMID41_LFPW_250600.536c71ch68ac2f21hp1581p.1327392.GB...
2025-08-25 15:56:30,448 - INFO - system_utils:36 - Executing command: python3 /home/aoumeur/BQRM_V01/BQRM-main/scr/Arpege_mslp_plot.py /home/aoumeur/BQRM_V01/BQRM-main/arpege_mslp/YMID41_LFPW_250600.536c71ch68ac2f21hp1581p.1327392.GB --shared-log-file /home/aoumeur/BQRM_V01/BQRM-main/scr/logs/BQRM_ref.log in directory: '/home/aoumeur/BQRM_V01/BQRM-main/scr'
2025-08-25 15:56:31,057 - INFO - Arpege_mslp_plot:35 - -------------------------------------------------------------------
2025-08-25 15:56:31,057 - INFO - Arpege_mslp_plot:36 - Script Arpege_mslp_plot.py started.
2025-08-25 15:56:31,057 - INFO - Arpege_mslp_plot:37 - Logging to shared file: /home/aoumeur/BQRM_V01/BQRM-main/scr/logs/BQRM_ref.log
2025-08-25 15:56:31,058 - INFO - Arpege_mslp_plot:38 - -------------------------------------------------------------------
2025-08-25 15:56:31,058 - INFO - Arpege_mslp_plot:47 - Suppressed Matplotlib DEBUG and INFO logs.
2025-08-25 15:56:31,058 - INFO - Arpege_mslp_plot:68 - Environment variables loaded: PWD=/home/aoumeur/BQRM_V01/BQRM-main/scr, AA=2025, MM=08, DD=25
2025-08-25 15:56:31,058 - INFO - Arpege_mslp_plot:200 - Input filename received from command line: /home/aoumeur/BQRM_V01/BQRM-main/arpege_mslp/YMID41_LFPW_250600.536c71ch68ac2f21hp1581p.1327392.GB
2025-08-25 15:56:31,058 - INFO - Arpege_mslp_plot:87 - Starting MSLP plot generation for input file: /home/aoumeur/BQRM_V01/BQRM-main/arpege_mslp/YMID41_LFPW_250600.536c71ch68ac2f21hp1581p.1327392.GB
2025-08-25 15:56:31,087 - INFO - Arpege_mslp_plot:92 - Successfully opened GRIB file: /home/aoumeur/BQRM_V01/BQRM-main/arpege_mslp/YMID41_LFPW_250600.536c71ch68ac2f21hp1581p.1327392.GB
2025-08-25 15:56:31,142 - INFO - Arpege_mslp_plot:113 - Successfully selected MSLP data using name: 'Mean sea level pressure'.
2025-08-25 15:56:31,150 - INFO - Arpege_mslp_plot:135 - Extracted MSLP data and lat/lon coordinates.
2025-08-25 15:56:31,150 - INFO - Arpege_mslp_plot:139 - Closed GRIB file.
2025-08-25 15:56:31,150 - INFO - Arpege_mslp_plot:142 - Initializing plot figure.
2025-08-25 15:56:31,158 - INFO - Arpege_mslp_plot:146 - Setting up Basemap projection.
2025-08-25 15:56:31,814 - INFO - Arpege_mslp_plot:152 - Basemap initialized successfully.
2025-08-25 15:56:31,899 - INFO - Arpege_mslp_plot:160 - Coastlines and countries drawn on the map.
2025-08-25 15:56:31,903 - INFO - Arpege_mslp_plot:164 - Converted lat/lon to map coordinates.
2025-08-25 15:56:31,903 - INFO - Arpege_mslp_plot:167 - Plotting MSLP contours.
2025-08-25 15:56:31,976 - INFO - Arpege_mslp_plot:173 - MSLP contours plotted and labeled.
2025-08-25 15:56:31,977 - INFO - Arpege_mslp_plot:179 - Plot title set.
2025-08-25 15:56:31,977 - INFO - Arpege_mslp_plot:183 - Attempting to save plot to: /home/aoumeur/BQRM_V01/BQRM-main/scr/../mslp_202508250600.png
2025-08-25 15:56:31,977 - DEBUG - file_operations:403 - Parent directory already exists: /home/aoumeur/BQRM_V01/BQRM-main/scr/..
2025-08-25 15:56:32,271 - INFO - Arpege_mslp_plot:187 - Plot saved successfully at /home/aoumeur/BQRM_V01/BQRM-main/scr/../mslp_202508250600.png
2025-08-25 15:56:32,271 - INFO - Arpege_mslp_plot:193 - Plot figure closed to release resources.
2025-08-25 15:56:32,271 - INFO - Arpege_mslp_plot:195 - Plot generation completed for file.
2025-08-25 15:56:32,273 - INFO - Arpege_mslp_plot:204 - Script finished successfully.
2025-08-25 15:56:32,349 - INFO - system_utils:47 - Command 'python3' completed successfully.
2025-08-25 15:56:32,350 - INFO - BQRM_ref:253 - Arpege_mslp_plot.py executed successfully for YMID41_LFPW_250600.536c71ch68ac2f21hp1581p.1327392.GB.
2025-08-25 15:56:32,350 - INFO - BQRM_ref:258 - Running BufrToXLS_ref.py...
2025-08-25 15:56:32,350 - INFO - system_utils:36 - Executing command: python3 /home/aoumeur/BQRM_V01/BQRM-main/scr/BufrToXLS_ref.py --shared-log-file /home/aoumeur/BQRM_V01/BQRM-main/scr/logs/BQRM_ref.log in directory: '/home/aoumeur/BQRM_V01/BQRM-main/scr'
2025-08-25 15:56:32,899 - INFO - BufrToXLS_ref:35 - -------------------------------------------------------------------
2025-08-25 15:56:32,899 - INFO - BufrToXLS_ref:36 - Script BufrToXLS_ref.py started.
2025-08-25 15:56:32,899 - INFO - BufrToXLS_ref:37 - Logging to shared file: /home/aoumeur/BQRM_V01/BQRM-main/scr/logs/BQRM_ref.log
2025-08-25 15:56:32,899 - INFO - BufrToXLS_ref:38 - -------------------------------------------------------------------
2025-08-25 15:56:32,899 - INFO - BufrToXLS_ref:43 - Retrieving environment variables...
2025-08-25 15:56:32,899 - INFO - BufrToXLS_ref:68 - All required environment variables retrieved successfully.
2025-08-25 15:56:32,900 - INFO - BufrToXLS_ref:76 - Constructed BUFR 18h file path: /home/aoumeur/BQRM_V01/BQRM-main/synop_alg_202508241800.bufr
2025-08-25 15:56:32,900 - INFO - BufrToXLS_ref:77 - Constructed BUFR 06h file path: /home/aoumeur/BQRM_V01/BQRM-main/synop_alg_202508250600.bufr
2025-08-25 15:56:32,900 - INFO - BufrToXLS_ref:81 - Attempting to read 06h BUFR data from /home/aoumeur/BQRM_V01/BQRM-main/synop_alg_202508250600.bufr (main columns).
2025-08-25 15:56:32,900 - INFO - data_utils:319 - Attempting to read BUFR file: /home/aoumeur/BQRM_V01/BQRM-main/synop_alg_202508250600.bufr for columns: ['stationOrSiteName', 'heightOfStationGroundAboveMeanSeaLevel', 'windDirection', 'windSpeed', 'cloudCoverTotal', 'maximumTemperatureAtHeightAndOverPeriodSpecified', 'minimumTemperatureAtHeightAndOverPeriodSpecified'] with kwargs: {}
2025-08-25 15:56:33,025 - INFO - data_utils:328 - Successfully loaded BUFR data from /home/aoumeur/BQRM_V01/BQRM-main/synop_alg_202508250600.bufr. DataFrame shape: (75, 7)
2025-08-25 15:56:33,025 - INFO - BufrToXLS_ref:96 - Successfully read 75 records for df_06.
2025-08-25 15:56:33,025 - INFO - BufrToXLS_ref:98 - Attempting to read 06h BUFR data from /home/aoumeur/BQRM_V01/BQRM-main/synop_alg_202508250600.bufr (present and past weather).
2025-08-25 15:56:33,025 - INFO - data_utils:319 - Attempting to read BUFR file: /home/aoumeur/BQRM_V01/BQRM-main/synop_alg_202508250600.bufr for columns: ['stationOrSiteName', 'presentWeather', 'pastWeather1', 'pastWeather2'] with kwargs: {}
2025-08-25 15:56:33,107 - INFO - data_utils:328 - Successfully loaded BUFR data from /home/aoumeur/BQRM_V01/BQRM-main/synop_alg_202508250600.bufr. DataFrame shape: (75, 4)
2025-08-25 15:56:33,108 - INFO - BufrToXLS_ref:107 - Successfully read 75 records for df_06_ww.
2025-08-25 15:56:33,108 - INFO - BufrToXLS_ref:109 - Attempting to read 18h BUFR data from /home/aoumeur/BQRM_V01/BQRM-main/synop_alg_202508241800.bufr.
2025-08-25 15:56:33,108 - INFO - data_utils:319 - Attempting to read BUFR file: /home/aoumeur/BQRM_V01/BQRM-main/synop_alg_202508241800.bufr for columns: ['stationOrSiteName', 'heightOfStationGroundAboveMeanSeaLevel', 'maximumTemperatureAtHeightAndOverPeriodSpecified'] with kwargs: {'filters': {'timePeriod': 0}}
2025-08-25 15:56:33,204 - INFO - data_utils:328 - Successfully loaded BUFR data from /home/aoumeur/BQRM_V01/BQRM-main/synop_alg_202508241800.bufr. DataFrame shape: (77, 3)
2025-08-25 15:56:33,204 - INFO - BufrToXLS_ref:119 - Successfully read 77 records for df_18.
2025-08-25 15:56:33,204 - INFO - BufrToXLS_ref:121 - Attempting to read 06h BUFR data from /home/aoumeur/BQRM_V01/BQRM-main/synop_alg_202508250600.bufr (precipitation).
2025-08-25 15:56:33,204 - INFO - data_utils:319 - Attempting to read BUFR file: /home/aoumeur/BQRM_V01/BQRM-main/synop_alg_202508250600.bufr for columns: ['stationOrSiteName', 'heightOfStationGroundAboveMeanSeaLevel', 'totalPrecipitationOrTotalWaterEquivalent'] with kwargs: {'filters': {'timePeriod': -24}}
2025-08-25 15:56:33,297 - INFO - data_utils:328 - Successfully loaded BUFR data from /home/aoumeur/BQRM_V01/BQRM-main/synop_alg_202508250600.bufr. DataFrame shape: (75, 3)
2025-08-25 15:56:33,297 - INFO - BufrToXLS_ref:131 - Successfully read 75 records for df_RR.
2025-08-25 15:56:33,298 - INFO - BufrToXLS_ref:138 - Renaming DataFrame columns...
2025-08-25 15:56:33,298 - INFO - BufrToXLS_ref:159 - Columns renamed successfully for df_06, df_RR, and df_18.
2025-08-25 15:56:33,298 - INFO - BufrToXLS_ref:165 - Starting data processing and merging operations...
2025-08-25 15:56:33,299 - INFO - BufrToXLS_ref:169 - Temperature (Min de la nuit) and cloud cover (Néb (1/8)) calculations applied to df_06.
2025-08-25 15:56:33,303 - INFO - BufrToXLS_ref:176 - Present and past weather codes (ww, w1, w2) added to df_06.
2025-08-25 15:56:33,305 - INFO - BufrToXLS_ref:180 - df_06 merged with df_RR (precipitation data). New df_06 shape: (81, 11)
2025-08-25 15:56:33,307 - INFO - BufrToXLS_ref:189 - df_06 cleaned (dropna on ALTITUDE EN METRES, sort_values by STATIONS). Shape: (81, 11)
2025-08-25 15:56:33,309 - INFO - BufrToXLS_ref:193 - df_18 cleaned (dropna on ALTITUDE, sort_values by STATIONS). Shape: (77, 3)
2025-08-25 15:56:33,311 - INFO - BufrToXLS_ref:200 - df_06 merged with df_18 into df_merged. Shape: (91, 12)
2025-08-25 15:56:33,311 - INFO - BufrToXLS_ref:204 - Max de la veille calculated in df_merged (Kelvin to Celsius conversion) and temporary 'Max' column dropped.
2025-08-25 15:56:33,312 - INFO - BufrToXLS_ref:209 - df_merged columns reordered to final output format.
2025-08-25 15:56:33,313 - INFO - BufrToXLS_ref:236 - Wind direction (Dir) converted to 8-point rose format.
2025-08-25 15:56:33,314 - INFO - BufrToXLS_ref:240 - Wind direction adjusted for 'Calme' (0 m/s) and 'VRB' (0-2 m/s) conditions.
2025-08-25 15:56:33,316 - INFO - BufrToXLS_ref:247 - Weather codes (ww, w1, w2) and precipitation values cleaned/filtered.
2025-08-25 15:56:33,316 - INFO - BufrToXLS_ref:260 - Saving df_merged to temporary Excel file: /home/aoumeur/BQRM_V01/BQRM-main/output.xlsx
2025-08-25 15:56:33,340 - INFO - BufrToXLS_ref:264 - Temporary Excel file saved successfully with correct headers.
2025-08-25 15:56:33,354 - INFO - BufrToXLS_ref:271 - Applying border style to all cells in the worksheet.
2025-08-25 15:56:33,399 - INFO - BufrToXLS_ref:280 - Borders applied successfully to all cells.
2025-08-25 15:56:33,399 - INFO - BufrToXLS_ref:282 - Resaving temporary Excel file with borders to: /home/aoumeur/BQRM_V01/BQRM-main/output.xlsx
2025-08-25 15:56:33,413 - INFO - BufrToXLS_ref:284 - Temporary Excel file (with borders) resaved successfully.
2025-08-25 15:56:33,413 - INFO - BufrToXLS_ref:299 - Reading data from /home/aoumeur/BQRM_V01/BQRM-main/output.xlsx for final Excel generation.
2025-08-25 15:56:33,434 - INFO - BufrToXLS_ref:301 - Successfully read 91 records from /home/aoumeur/BQRM_V01/BQRM-main/output.xlsx.
2025-08-25 15:56:33,434 - INFO - BufrToXLS_ref:303 - Loading list of stations template from: /home/aoumeur/BQRM_V01/BQRM-main/templates/liste_stations_ref.xlsx
2025-08-25 15:56:33,434 - INFO - data_utils:281 - Attempting to load Excel workbook: /home/aoumeur/BQRM_V01/BQRM-main/templates/liste_stations_ref.xlsx
2025-08-25 15:56:33,491 - INFO - data_utils:284 - Successfully loaded Excel workbook: /home/aoumeur/BQRM_V01/BQRM-main/templates/liste_stations_ref.xlsx, active sheet: 'Sheet1'
2025-08-25 15:56:33,491 - INFO - BufrToXLS_ref:306 - List of stations template loaded successfully.
2025-08-25 15:56:33,491 - INFO - BufrToXLS_ref:308 - Iterating through station list and populating data into the template.
2025-08-25 15:56:33,551 - INFO - BufrToXLS_ref:348 - Finished populating station data. 71 stations found and updated in the Excel template.
2025-08-25 15:56:33,551 - INFO - BufrToXLS_ref:350 - Saving final Excel file to: /home/aoumeur/BQRM_V01/BQRM-main/Bulletin_202508250600.xlsx
2025-08-25 15:56:33,573 - INFO - BufrToXLS_ref:352 - Création du fichier Excel terminée avec succès!
2025-08-25 15:56:33,574 - INFO - BufrToXLS_ref:413 - Reading Word document template from: /home/aoumeur/BQRM_V01/BQRM-main/templates/Bulletin.docx
2025-08-25 15:56:33,591 - INFO - BufrToXLS_ref:415 - Word document template loaded successfully.
2025-08-25 15:56:33,591 - INFO - BufrToXLS_ref:417 - Extracting tables from the Word document for data insertion.
2025-08-25 15:56:33,592 - INFO - BufrToXLS_ref:432 - Found 1 tables to update in the Word document.
2025-08-25 15:56:33,592 - INFO - BufrToXLS_ref:435 - Merging data from DataFrame into Word document tables.
2025-08-25 15:56:33,978 - INFO - BufrToXLS_ref:480 - Insértion du tableau terminée avec succès!
2025-08-25 15:56:33,978 - INFO - BufrToXLS_ref:483 - Inserting images into Word document.
2025-08-25 15:56:33,984 - INFO - BufrToXLS_ref:399 - Image (geopotential_and_temperature_202508250000.png) inserted successfully. Placed at end of document.
2025-08-25 15:56:33,990 - INFO - BufrToXLS_ref:399 - Image (mslp_202508250600.png) inserted successfully. Placed at end of document.
2025-08-25 15:56:33,991 - INFO - BufrToXLS_ref:493 - Saving final Word document to: /home/aoumeur/BQRM_V01/BQRM-main/BQRM_202508250600.docx
2025-08-25 15:56:34,069 - INFO - BufrToXLS_ref:495 - Insértion des images terminée avec succès!
2025-08-25 15:56:34,069 - INFO - BufrToXLS_ref:496 - Création du fichier Doc terminée avec succès!
2025-08-25 15:56:34,070 - INFO - BufrToXLS_ref:502 - Script finished successfully!
2025-08-25 15:56:34,163 - INFO - system_utils:47 - Command 'python3' completed successfully.
2025-08-25 15:56:34,164 - INFO - BQRM_ref:266 - BufrToXLS_ref.py executed successfully.
2025-08-25 15:56:34,164 - INFO - BQRM_ref:273 - Running send_MSG.py...
2025-08-25 15:56:34,164 - INFO - system_utils:36 - Executing command: python3 /home/aoumeur/BQRM_V01/BQRM-main/scr/send_MSG.py --shared-log-file /home/aoumeur/BQRM_V01/BQRM-main/scr/logs/BQRM_ref.log in directory: '/home/aoumeur/BQRM_V01/BQRM-main/scr'
2025-08-25 15:56:34,229 - INFO - send_MSG:54 - Logger initialized for send_MSG. Log file: /home/aoumeur/BQRM_V01/BQRM-main/scr/logs/BQRM_ref.log
2025-08-25 15:56:34,230 - INFO - send_MSG:55 - Starting BQRM bulletin sending script.
2025-08-25 15:56:34,230 - DEBUG - date_time_utils:34 - Calculating YMD for 'today' (offset: 0) and 'yesterday' (offset: 0).
2025-08-25 15:56:34,230 - INFO - date_time_utils:56 - Processed dates - Today: 2025-08-25, Yesterday: 2025-08-24
2025-08-25 15:56:34,230 - DEBUG - send_MSG:60 - Today's date components: Year=2025, Month=08, Day=25
2025-08-25 15:56:34,230 - DEBUG - send_MSG:67 - BQRM documents path determined as: /home/aoumeur/BQRM_V01/BQRM-main/scr/../bulletins/2025/08/25
2025-08-25 15:56:34,230 - INFO - send_MSG:71 - Expected BQRM document file path: /home/aoumeur/BQRM_V01/BQRM-main/scr/../bulletins/2025/08/25/BQRM_202508250600.docx
2025-08-25 15:56:34,230 - DEBUG - send_MSG:73 - Does Path.exists() find the file? True
2025-08-25 15:56:34,230 - DEBUG - send_MSG:74 - Does os.path.exists() find the file? True
2025-08-25 15:56:34,230 - DEBUG - send_MSG:75 - Resolved path: /home/aoumeur/BQRM_V01/BQRM-main/bulletins/2025/08/25/BQRM_202508250600.docx
2025-08-25 15:56:34,230 - DEBUG - send_MSG:80 - Sleeping for 5 seconds to allow file creation to complete (if timing issue).
2025-08-25 15:56:39,233 - DEBUG - send_MSG:83 - Does Path.exists() find the file after sleep? True
2025-08-25 15:56:39,234 - DEBUG - send_MSG:84 - Does os.path.exists() find the file after sleep? True
2025-08-25 15:56:39,234 - DEBUG - file_operations:244 - File found: /home/aoumeur/BQRM_V01/BQRM-main/scr/../bulletins/2025/08/25/BQRM_202508250600.docx
2025-08-25 15:56:39,234 - INFO - send_MSG:93 - Attempting to send email with BQRM document: /home/aoumeur/BQRM_V01/BQRM-main/scr/../bulletins/2025/08/25/BQRM_202508250600.docx
2025-08-25 15:56:39,235 - INFO - email_utils:30 - Attempting to send email from 'pnt@meteo.dz' to ['aoumeurmohamed2404@gmail.com'] with subject: 'BQRM du 25/08/2025'
2025-08-25 15:56:39,235 - DEBUG - email_utils:31 - Attachments list received by send_email: [PosixPath('/home/aoumeur/BQRM_V01/BQRM-main/scr/../bulletins/2025/08/25/BQRM_202508250600.docx')]
2025-08-25 15:56:39,354 - DEBUG - email_utils:37 - Successfully logged into SMTP server.
2025-08-25 15:56:39,355 - DEBUG - email_utils:47 - Found 1 attachments to process.
2025-08-25 15:56:39,355 - DEBUG - email_utils:50 - Processing attachment: '/home/aoumeur/BQRM_V01/BQRM-main/scr/../bulletins/2025/08/25/BQRM_202508250600.docx'
2025-08-25 15:56:39,355 - DEBUG - email_utils:54 - Attachment file found at '/home/aoumeur/BQRM_V01/BQRM-main/scr/../bulletins/2025/08/25/BQRM_202508250600.docx'. Attempting to open and attach.
2025-08-25 15:56:39,419 - DEBUG - email_utils:61 - Successfully attached file: 'BQRM_202508250600.docx'
2025-08-25 15:56:39,727 - INFO - email_utils:71 - Email successfully sent to 'aoumeurmohamed2404@gmail.com'.
2025-08-25 15:56:39,731 - INFO - send_MSG:106 - BQRM email process completed successfully.
2025-08-25 15:56:39,731 - INFO - send_MSG:116 - Script execution finished.
2025-08-25 15:56:39,763 - INFO - system_utils:47 - Command 'python3' completed successfully.
2025-08-25 15:56:39,764 - INFO - BQRM_ref:281 - send_MSG.py executed successfully.
2025-08-25 15:56:39,764 - INFO - BQRM_ref:288 - Starting cleanup and archiving operations.
2025-08-25 15:56:39,764 - INFO - BQRM_ref:291 - Removing temporary Arpege directories: arpege_mslp and arpege_geopotentiel_temperature.
2025-08-25 15:56:39,764 - INFO - file_operations:283 - Starting cleanup of directory: /home/aoumeur/BQRM_V01/BQRM-main/arpege_mslp (Pattern: All files)
2025-08-25 15:56:39,765 - INFO - file_operations:300 - Finished cleanup. Successfully deleted 1 files from /home/aoumeur/BQRM_V01/BQRM-main/arpege_mslp.
2025-08-25 15:56:39,765 - INFO - BQRM_ref:295 - Removed directory: /home/aoumeur/BQRM_V01/BQRM-main/arpege_mslp
2025-08-25 15:56:39,766 - INFO - file_operations:283 - Starting cleanup of directory: /home/aoumeur/BQRM_V01/BQRM-main/arpege_geopotentiel_temperature (Pattern: All files)
2025-08-25 15:56:39,767 - INFO - file_operations:300 - Finished cleanup. Successfully deleted 1 files from /home/aoumeur/BQRM_V01/BQRM-main/arpege_geopotentiel_temperature.
2025-08-25 15:56:39,767 - INFO - BQRM_ref:304 - Removed directory: /home/aoumeur/BQRM_V01/BQRM-main/arpege_geopotentiel_temperature
2025-08-25 15:56:39,767 - INFO - BQRM_ref:310 - Removing temporary Synop text and BUFR files from local_directory.
2025-08-25 15:56:39,767 - INFO - file_operations:283 - Starting cleanup of directory: /home/aoumeur/BQRM_V01/BQRM-main/scr (Pattern: Synop_202508241800*)
2025-08-25 15:56:39,768 - INFO - file_operations:300 - Finished cleanup. Successfully deleted 0 files from /home/aoumeur/BQRM_V01/BQRM-main/scr.
2025-08-25 15:56:39,768 - INFO - file_operations:283 - Starting cleanup of directory: /home/aoumeur/BQRM_V01/BQRM-main/scr (Pattern: Synop_202508250600*)
2025-08-25 15:56:39,769 - INFO - file_operations:300 - Finished cleanup. Successfully deleted 0 files from /home/aoumeur/BQRM_V01/BQRM-main/scr.
2025-08-25 15:56:39,769 - INFO - file_operations:283 - Starting cleanup of directory: /home/aoumeur/BQRM_V01/BQRM-main/scr (Pattern: YMID*)
2025-08-25 15:56:39,770 - INFO - file_operations:300 - Finished cleanup. Successfully deleted 1 files from /home/aoumeur/BQRM_V01/BQRM-main/scr.
2025-08-25 15:56:39,770 - INFO - BQRM_ref:315 - Removing other temporary output files (xlsx, png) from bqrm_output_root.
2025-08-25 15:56:39,770 - INFO - file_operations:171 - Successfully deleted file: /home/aoumeur/BQRM_V01/BQRM-main/output.xlsx
2025-08-25 15:56:39,770 - INFO - file_operations:283 - Starting cleanup of directory: /home/aoumeur/BQRM_V01/BQRM-main (Pattern: Bulletin_*.xlsx)
2025-08-25 15:56:39,770 - INFO - file_operations:300 - Finished cleanup. Successfully deleted 1 files from /home/aoumeur/BQRM_V01/BQRM-main.
2025-08-25 15:56:39,771 - INFO - file_operations:283 - Starting cleanup of directory: /home/aoumeur/BQRM_V01/BQRM-main (Pattern: geopotential_and_temperature_*.png)
2025-08-25 15:56:39,771 - INFO - file_operations:300 - Finished cleanup. Successfully deleted 1 files from /home/aoumeur/BQRM_V01/BQRM-main.
2025-08-25 15:56:39,771 - INFO - file_operations:283 - Starting cleanup of directory: /home/aoumeur/BQRM_V01/BQRM-main (Pattern: mslp_*.png)
2025-08-25 15:56:39,772 - INFO - file_operations:300 - Finished cleanup. Successfully deleted 1 files from /home/aoumeur/BQRM_V01/BQRM-main.
2025-08-25 15:56:39,772 - INFO - BQRM_ref:326 - Creating final output directories under /home/aoumeur/BQRM_V01/BQRM-main.
2025-08-25 15:56:39,772 - INFO - BQRM_ref:335 - Final output directories created successfully.
2025-08-25 15:56:39,772 - INFO - BQRM_ref:340 - Moving processed BUFR files and generated documents to archive locations.
2025-08-25 15:56:39,772 - INFO - BQRM_ref:345 - Moved synop_alg_202508241800.bufr to /home/aoumeur/BQRM_V01/BQRM-main/data/2025/08/24.
2025-08-25 15:56:39,773 - INFO - BQRM_ref:351 - Moved synop_alg_202508250600.bufr to /home/aoumeur/BQRM_V01/BQRM-main/data/2025/08/25.
2025-08-25 15:56:39,773 - INFO - BQRM_ref:358 - Moved BQRM_202508250600.docx to /home/aoumeur/BQRM_V01/BQRM-main/bulletins/2025/08/25.
2025-08-25 15:56:39,773 - INFO - BQRM_ref:366 - Performing backup operations (currently commented out in original script).
2025-08-25 15:56:39,773 - INFO - BQRM_ref:368 - -------------------------------------------------------------------
2025-08-25 15:56:39,773 - INFO - BQRM_ref:369 - Script BQRM_ref.py finished successfully.
2025-08-25 15:56:39,773 - INFO - BQRM_ref:370 - -------------------------------------------------------------------
